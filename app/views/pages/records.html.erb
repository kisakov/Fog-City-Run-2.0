<!DOCTYPE html>
<html>
<head>
  <title>Records</title>
</head>
<nav class="navbar navbar-default navbar-fixed-top">
  <a class="navbar-brand" href="#"><b>Fog City Run</b></a>
  <ul class="nav navbar-nav">
    <li class="nav-item">
      <a class="nav-link" <%= link_to "Home", root_path %></a>
    </li>
    <li class="nav-item">
      <a class="nav-link" <%= link_to 'Racers', racers_path %></a>
    </li>
    <li class="nav-item">
      <a class="nav-link" <%= link_to 'Races', races_path %></a>
    </li>
    <li class="nav-item">
      <a class="nav-link" <%= link_to 'Racer Count', count_path %></a>
    </li>
    <li class="nav-item active">
      <a class="nav-link" <%= link_to 'Records', records_path %></a>
    </li>
    <li class="nav-item">
      <a class="nav-link" <%= link_to 'Loop-Beer-Loop', loop_beer_path %></a>
    </li>
    <%= render "shared/import_button" %>
  </ul>
  <%= render "shared/login" %>
</nav>
<body style="padding-top: 60px">
<div class="container-fluid">
    <table class="table table-hover table-bordered">
      <thead>
      <tr>
        <th>Racer</th>
        <th>PR Time</th>
      </tr>
      </thead>
      <tbody>
      <% Result.group(:racer_id).pluck('racer_id', 'min(time)').sort_by {|_key, value| value}.each do |result| %>
        <tr>
          <td><%= link_to Racer.find(result[0]).first_name + " " + Racer.find(result[0]).last_name, racer_path(Racer.find(result[0])) %></td>
          <td><%= result[1] %>
      <% end %>
      </tbody>
    </table>
  </div>
</body>
</html>